<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ncvt.speed.mapper.ShareMapper">

    <resultMap id="ShareRMap" type="com.ncvt.speed.entity.ShareEntity">
        <result column="share_id" property="shareId"></result>
        <result column="file_id" property="fileId"></result>
        <result column="share_url" property="shareUrl"></result>
        <result column="command" property="command"></result>
        <result column="user_id" property="userId"></result>
        <result column="share_time" property="shareTime"></result>
        <result column="share_type" property="shareType"></result>
        <result column="user_name" property="userName"></result>
    </resultMap>

    <select id="queryShareByUrl" resultMap="ShareRMap">
        SELECT * FROM tb_share WHERE share_url=#{url}
    </select>

    <!-- keyProperty="userId" 设置主键字段对应的实体类 -->
    <insert id="addShare" useGeneratedKeys="true" keyProperty="shareId">
        INSERT INTO tb_share(
            file_id,
            share_url,
            command,
            user_id,
            share_time,
            share_type,
            user_name
        ) VALUES (
            #{fileId},#{shareUrl},#{command},#{userId},#{shareTime},#{shareType},#{userName}
        )
    </insert>

</mapper>